Tasks To Be Performed:
 1. Use the previous assignmentâ€™s deployment
 2. Deploy any 2 containers in a overlay network
 3. Try pinging each of the containers from within the containers

---

Here's a **detailed solution** for your assignment based on Docker Swarm:

---

## ğŸ§¾ **Assignment Tasks Overview**

### âœ… Task 1: Use the previous assignmentâ€™s deployment

We assume you already have a Docker Swarm cluster running with an Apache service deployed.

### âœ… Task 2: Deploy any 2 containers in an **overlay network**

### âœ… Task 3: **Ping each container from the other** inside the containers

---

## ğŸ› ï¸ **Step-by-Step Detailed Solution**

---

### âœ… **Step 1: Ensure Docker Swarm Is Initialized**

If you havenâ€™t already, initialize Swarm on the manager:

```bash
docker swarm init --advertise-addr <MANAGER-IP>
```

---

### âœ… **Step 2: Create an Overlay Network**

Overlay networks allow containers across multiple nodes to communicate securely.

```bash
docker network create \
  --driver overlay \
  --attachable \
  my_overlay_net
```

* `--driver overlay`: Creates a multi-host network
* `--attachable`: Allows containers to be manually connected to the network (not just services)

---

### âœ… **Step 3: Deploy Two Containers (as Services) in the Overlay Network**

Weâ€™ll deploy 2 simple containers (using Alpine for simplicity), and attach them to the `my_overlay_net`.

#### ğŸŸ¢ Container 1:

```bash
docker service create \
  --name alpine1 \
  --network my_overlay_net \
  --replicas 1 \
  alpine \
  sleep 10000
```

#### ğŸŸ¢ Container 2:

```bash
docker service create \
  --name alpine2 \
  --network my_overlay_net \
  --replicas 1 \
  alpine \
  sleep 10000
```

> These services just run a long `sleep` command to keep them alive for testing.

---

### âœ… **Step 4: Identify the Containers**

Get the container IDs (you may run this on each node if needed):

```bash
docker ps
```

Look for containers named like `alpine1.XXXX` and `alpine2.XXXX`.

---

### âœ… **Step 5: Ping Between Containers**

To ping one container from another:

1. **Get the container shell (into alpine1):**

```bash
docker exec -it <alpine1_container_id> sh
```

2. **Ping the other container (alpine2):**

You can ping by container **service name**, thanks to built-in DNS in the overlay network:

```sh
ping alpine2
```

You should see successful ping replies.

3. **Now do the reverse**:

   * `exit` the current container
   * `docker exec -it <alpine2_container_id> sh`
   * `ping alpine1`

---

### âœ… **Expected Output**

You should see something like this when pinging:

```
PING alpine2 (10.0.0.5): 56 data bytes
64 bytes from 10.0.0.5: seq=0 ttl=64 time=0.124 ms
64 bytes from 10.0.0.5: seq=1 ttl=64 time=0.121 ms
...
```

This confirms the overlay network is working and containers can talk to each other across nodes.

---

## ğŸ§¼ Optional Cleanup

To remove services and network:

```bash
docker service rm alpine1 alpine2
docker network rm my_overlay_net
```

---

## âœ… Summary of Commands

```bash
docker network create --driver overlay --attachable my_overlay_net

docker service create --name alpine1 --network my_overlay_net --replicas 1 alpine sleep 10000

docker service create --name alpine2 --network my_overlay_net --replicas 1 alpine sleep 10000

# Get container ID and ping inside
docker exec -it <container_id> sh
ping alpine2
```

---
